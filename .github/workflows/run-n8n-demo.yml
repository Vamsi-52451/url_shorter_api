name: n8n Demo CI

on:
  workflow_dispatch:
    inputs:
      trigger_source:
        description: "Who triggered the workflow"
        required: true
        default: "n8n"
      time:
        description: "Trigger timestamp"
        required: true
        default: "none"
      resumeUrl:
        description: "URL to notify n8n when job is done"
        required: true
        default: "none"

jobs:
  run-demo:
    runs-on: ubuntu-latest
    steps:
      - name: Start message
        run: echo "Triggered by ${{ github.event.inputs.trigger_source }} at ${{ github.event.inputs.time }}"
      - name: Callback n8n when complete
        run: |
          curl -X POST "${{ github.event.inputs.resumeUrl }}" \
            -H "Content-Type: application/json" \
            -d '{"status":"success"}'
